<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "stylesheet" type = "text/css" href="main.css">
    <title>Document</title>
</head>

<body>
  <div class="header-wrapper">
    <h1 class="header">μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈμ…λ‹λ‹¤.</h1>
  </div>
  <div class="link">
    <a href="index.html" class="now">λ©”μΈνμ΄μ§€</a>
    <a href="login.html">λ΅κ·ΈμΈ</a>
    <a href="signup.html">νμ›κ°€μ…</a>
  </div>
  <hr>
  <div class="search">
    <input type="text" id="searchInput" placeholder="ν‚¤μ›λ“λ¥Ό μ…λ ¥ν•μ„Έμ”" />
    <button id="searchButton">Filter results</button>
  </div>
  <h2 class="movie-text">Movies</h2>
  <hr>
  <div class="content-wrapper">
    <div class="sort-radio">
      <h4>μ •λ ¬ κΈ°μ¤€</h4>
      <label><input type="radio" name="sort" value="grade-desc" /> ν‰μ  λ‚΄λ¦Όμ°¨μ</label>
      <label><input type="radio" name="sort" value="grade-asc" /> ν‰μ  μ¤λ¦„μ°¨μ</label>
      <label><input type="radio" name="sort" value="date-desc" /> κ°λ΄‰μΌ λ‚΄λ¦Όμ°¨μ</label>
      <label><input type="radio" name="sort" value="date-asc" /> κ°λ΄‰μΌ μ¤λ¦„μ°¨μ</label>
    </div>
    <div class="movies"></div>
  </div>
    <div class="abouts">
      <h3>About</h3>
      <hr>
      <div class="about">μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
          μ—¬κΈ°λ” μΈν”„λ° μν™”μ •λ³΄ μ‚¬μ΄νΈ!
      </div>
    </div>
  <script>
    let allMovies = [];
    let filteredMovies = [];
    let currentIndex = 0;
    const SIZE = 4;
    
    window.addEventListener("DOMContentLoaded", () => {
      fetch("product.json")
        .then(response => response.json())
        .then(data => {
          allMovies = data;
          applyFilter();
        });
    
      document.getElementById("searchButton").addEventListener("click", () => {
        applyFilter();
      });
    
      document.querySelectorAll("input[name=sort]").forEach(radio => {
        radio.addEventListener("change", () => {
          applyFilter();
        });
      });
    
      window.addEventListener("scroll", handleScroll);
    });
    
    function applyFilter() {
      const search = document.getElementById("searchInput").value.toLowerCase();
      const sort = document.querySelector("input[name=sort]:checked")?.value;
    
      filteredMovies = allMovies.filter(m => m.title.toLowerCase().includes(search));
    
      if (sort === "grade-desc") {
        filteredMovies.sort((a, b) => b.grade - a.grade);
      } else if (sort === "grade-asc") {
        filteredMovies.sort((a, b) => a.grade - b.grade);
      } else if (sort === "date-desc") {
        filteredMovies.sort((a, b) => new Date(b.date) - new Date(a.date));
      } else if (sort === "date-asc") {
        filteredMovies.sort((a, b) => new Date(a.date) - new Date(b.date));
      }
    
      currentIndex = 0;
      document.querySelector(".movies").innerHTML = "";
      loadNext();
    }
    
    function loadNext() {
      const container = document.querySelector(".movies");
      const end = Math.min(currentIndex + SIZE, filteredMovies.length);
      const batch = filteredMovies.slice(currentIndex, end);
    
      batch.forEach(movie => {
        const card = document.createElement("div");
        card.className = "movie-card";
    
        card.innerHTML = `
          <div class="image-container">
            <img src="${movie.image}" alt="${movie.title}" class="image" />
            <div class="overlay">
              <p class="description">μ¤„κ±°λ¦¬ : <br>${movie.description}</p>
            </div>
          </div>
          <div class="movie-info">
            <h3 class="title">${movie.title}</h3>
            <div class="date">π“… ${movie.date}</div>
            <div class="grade">β­ ${movie.grade}/10</div>
          </div>
        `;
    
        const poster = card.querySelector(".image-container");
        const overlay = card.querySelector(".overlay");
    
        poster.addEventListener("mouseenter", () => {
          overlay.style.opacity = "1";
        });
    
        poster.addEventListener("mouseleave", () => {
          overlay.style.opacity = "0";
        });
    
        container.appendChild(card);
      });
    
      currentIndex = end;
    }
    
    function handleScroll() {
      const scrollTop = window.scrollY;
      const windowHeight = window.innerHeight;
      const bodyHeight = document.body.offsetHeight;
    
      if (scrollTop + windowHeight >= bodyHeight - 100) {
        loadNext();
      }
    }
    </script>
    
    
    
    
</body>

</html>